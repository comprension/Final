{% extends 'base.html' %}
{% block contenido %}
<h2>{% if producto %}Editar{% else %}Agregar{% endif %} producto</h2>

<form method="post">
    {% csrf_token %}
    <label for="id_nombre">Nombre</label>
    <input type="text" id="id_nombre" name="nombre" required
           value="{% if producto %}{{ producto.nombre }}{% endif %}">

    <label for="id_descripcion">Descripción</label>
    <textarea id="id_descripcion" name="descripcion">{% if producto %}{{ producto.descripcion }}{% endif %}</textarea>

    <label for="id_precio">Precio</label>
    <input type="number" step="0.01" min="0" id="id_precio" name="precio" required
           value="{% if producto %}{{ producto.precio }}{% endif %}">

    <label for="id_stock">Existencias</label>
    <input type="number" min="0" id="id_stock" name="stock"
           value="{% if producto %}{{ producto.stock }}{% else %}0{% endif %}">

    <label for="id_categoria">Categoría</label>
    <select id="id_categoria" name="categoria" required>
        <option value="">Seleccione una categoría</option>
        {% for categoria in categorias %}
            <option value="{{ categoria.id }}"
                    {% if producto and producto.categoria.id == categoria.id %}selected{% endif %}>
                {{ categoria.nombre }}
            </option>
        {% endfor %}
    </select>

    <button type="submit" class="btn btn-primary">Guardar</button>
    <a href="{% url 'home:productos_listar' %}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
